{#
Dashboard Overview Section
FlyonUI stat cards + ApexCharts area chart, chart initialized via Alpine.js
#}
<div x-data="overviewStore()" x-init="init()" class="space-y-8">
  <h1 class="text-3xl font-bold mb-4">
    Overview
  </h1>
  <p>A summary of your portfolio, recent activity, and key stats.</p>
  <!-- Filtering UI removed: now shared at dashboard level -->
  <!-- Stat Cards -->
  <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
    <!-- Portfolio Value -->
    <div class="box rounded-box shadow flex items-center gap-4 p-6 bg-base-100">
      <div class="flex-shrink-0 flex items-center justify-center w-12 h-12 rounded-full bg-primary/20">
        <span class="icon-[tabler--wallet] text-2xl text-primary"></span>
      </div>
      <div>
        <div class="text-2xl font-bold" x-text="stats ? '$' + stats.portfolio.toLocaleString() : '-'">$24,500.00</div>
        <div class="text-base-content/70 text-sm">Portfolio Value</div>
        <div class="flex items-center gap-2 mt-1">
          <span class="badge badge-success badge-xs" x-text="stats ? '+' + stats.change + '%' : ''">+5.2%</span>
          <span class="text-xs text-base-content/50">this month</span>
        </div>
      </div>
    </div>
    <!-- 24h Gains/Losses -->
    <div class="box rounded-box shadow flex items-center gap-4 p-6 bg-base-100">
      <div class="flex-shrink-0 flex items-center justify-center w-12 h-12 rounded-full bg-secondary/20">
        <span class="icon-[tabler--trending-up] text-2xl text-secondary"></span>
      </div>
      <div>
        <div class="text-2xl font-bold" x-text="stats ? '+' + stats.gains + '%' : '-'">+3.2%</div>
        <div class="text-base-content/70 text-sm">24h Gains/Losses</div>
        <div class="text-xs text-base-content/50 mt-1">Compared to yesterday</div>
      </div>
    </div>
    <!-- Recent Activity Count -->
    <div class="box rounded-box shadow flex items-center gap-4 p-6 bg-base-100">
      <div class="flex-shrink-0 flex items-center justify-center w-12 h-12 rounded-full bg-info/20">
        <span class="icon-[tabler--history] text-2xl text-info"></span>
      </div>
      <div>
        <div class="text-2xl font-bold" x-text="stats ? stats.activity : '-'">5</div>
        <div class="text-base-content/70 text-sm">Recent Activity</div>
        <div class="text-xs text-base-content/50 mt-1">Transactions this week</div>
      </div>
    </div>
  </div>

  <!-- Chart Card -->
  <div class="box rounded-box shadow bg-base-100">
    <div class="card-body">
      <h2 class="card-title">Portfolio Value Over Time</h2>
      <div id="apex-single-area-chart" class="w-full h-64"></div>
    </div>
  </div>

  <!-- Activity Stepper + Biggest Transactions Stepper -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
    <!-- Activity Stepper -->
    <div>
      <div class="box rounded-box shadow bg-base-100 p-6">
        <h2 class="card-title mb-6">Recent Activity</h2>
        <ul class="steps steps-vertical w-full">
          <template x-for="(tx, idx) in recentTransactions" :key="(tx.hash || '') + '-' + idx">
            <li x-show="tx" class="step flex items-center gap-4" :class="{
              'step-primary': tx.type === 'in',
              'step-secondary': tx.type === 'out',
              'step-info': tx.type === 'other',
              'step-warning': !['in','out','other'].includes(tx.type)
            }">
              <span :class="{
                'icon-[tabler--wallet] text-primary text-xl': tx.type === 'in',
                'icon-[tabler--trending-up] text-secondary text-xl': tx.type === 'out',
                'icon-[tabler--history] text-info text-xl': tx.type === 'other',
                'icon-[tabler--arrow-right] text-warning text-xl': !['in','out','other'].includes(tx.type)
              }"></span>
              <div>
                <div class="font-semibold">
                  <template x-if="tx.type === 'in'">Received <span class="text-primary" x-text="tx.in ? tx.in.amount : ''"></span></template>
                  <template x-if="tx.type === 'out'">Sent <span class="text-secondary" x-text="tx.out ? tx.out.amount : ''"></span></template>
                  <template x-if="tx.type === 'other'">Other</template>
                </div>
                <div class="text-xs text-base-content/60">
                  <span x-text="tx.datetime ? new Date(tx.datetime).toLocaleDateString('en-US', { month: 'short', day: '2-digit', year: '2-digit' }) : ''"></span>
                  <span x-show="tx.local && tx.local !== 'â€”'"> &mdash; <span x-text="tx.local"></span></span>
                </div>
              </div>
            </li>
          </template>
        </ul>
      </div>
    </div>
    <!-- Biggest Transactions Stepper -->
    <div>
      <div class="box rounded-box shadow bg-base-100 p-6">
        <h2 class="card-title mb-6">Biggest Transactions</h2>
        <ul class="steps steps-vertical w-full">
          <template x-for="(tx, idx) in biggestTransactions" :key="(tx.hash || '') + '-' + idx">
            <li x-show="tx" class="step flex items-center gap-4" :class="{
              'step-primary': tx.type === 'in',
              'step-secondary': tx.type === 'out',
              'step-info': tx.type === 'other',
              'step-warning': !['in','out','other'].includes(tx.type)
            }">
              <span :class="{
                'icon-[tabler--wallet] text-primary text-xl': tx.type === 'in',
                'icon-[tabler--trending-up] text-secondary text-xl': tx.type === 'out',
                'icon-[tabler--history] text-info text-xl': tx.type === 'other',
                'icon-[tabler--arrow-right] text-warning text-xl': !['in','out','other'].includes(tx.type)
              }"></span>
              <div>
                <div class="font-semibold">
                  <template x-if="tx.type === 'in'">Received <span class="text-primary" x-text="tx.in ? tx.in.amount : ''"></span></template>
                  <template x-if="tx.type === 'out'">Sent <span class="text-secondary" x-text="tx.out ? tx.out.amount : ''"></span></template>
                  <template x-if="tx.type === 'other'">Other</template>
                </div>
                <div class="text-xs text-base-content/60">
                  <span x-text="tx.local"></span>
                  <span x-show="tx.datetime"> &mdash; <span x-text="new Date(tx.datetime).toLocaleDateString('en-US', { month: 'short', day: '2-digit', year: '2-digit' })"></span></span>
                </div>
              </div>
            </li>
          </template>
        </ul>
      </div>
    </div>
  </div>
</div>